language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: HzlBNWl/45Hl3iQ1prEMFgyriUBoJO1TYNaLmJyS2pFhvualmXlLGQm43ymVPVTOcKICgR0YrXQj98+aXgIcv0g3QCmORifY2EvkVv6pnro3GSFIbdW/OXgoTvq7G55Oj0rcQvf0uf5vY58YxKbeEEhbtLsJItlgSNu0fQZXPFMke18h1zsnCGXjp+ltMwwz9GyLEww1Lj+Q2ri4/Byg4j+3iMt/AW3r7aqDwDDH9ATU+jrbgQUxXnpRByJPgGCBN/Rn5JsldfBws/JKJiXMv1hWX1c69Vq00fc1sGFqGniwSuG2MYpRhmfaoAXnwFUKWfWeCK9WLy3ylnjVrPaNMP9Laei8Gr+neCfx+DgS4F/Z5FOndZCQjLRpJRbeQbg1b0UpsnUw/XlEAgwtWnU0+ibT28OfO2bhzBCfEpT2qDobdya6ZrPq0BgnG8RewzfzH4t2JeZWgm9qBPevb0ycy6fFH3dqOEalpP4raCvLcRGEqoFTrVy8SRML1rGe5vUrb5qgOfF03Zx/ZepEoWvXVU0mhQXhuAG1HZEaOcAl5pzs6S+uUY3xXyGAmjMuoh60OmZjeRrTkT3q4WCncgBqyqJ7SLLpCa2GnJxflqUeCWgpyJ73b/tH4qHsMiRkvWXDOI+cgxAoBZihaz81yodptk2XOprCsPvI6fAZOHSNVOU=
    skip_existing: true
    on:
      branch: master
      tags: false
