language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: "SigLYD+6d4PcrF1gFKtcDu609BHroC0oIYhGAuKZ+iq9u77vpb8EBwhFlaPR/fdOHYGMECSo6idVXybW2Z++9tOprxP0oFY957ozrNi2n1coh4H8g1k8novCmac6RDaAH4nem4MZGHCvEz/e4S2XGr17DTILIBWx05uZCZohU61ihzpcgPzMLXzgrdBewhfGvHpJoOW0AyXaOdDVKYLIO8pWCUee3V2DBIcc9nQqVkjFvQePwjR8/Legeinq4X+FHuCQA/yUl2C2fsmZtCWGy3OC0A69sO9vsLDb5zi//o4V405NWD0sEFskrdZ+hV3rzLzSeN+zA7Sa3AjoEiPc8xUzxX68vOBq6c5Vvb7pEQ3wsk2HLF395aYwOyuGTj2wmXkQQVy5uKONarYKMZAZP4EHnCq+UlWoH4SOcz1eyjZXMvkQbQ96jbUsJzdina39VW763WTwNhCEJLJVxhgk1S1DVTkR2JF3U/qtx01+HwMdGPYrknUmzmlLnEcF/wwz8cM3AJSKAmuYb3P9XmBS0Hb7KhGFheAb5fKp+tVdtrl6zw6K5sTXJ3Akt1DKDMgAaUIJkdHNTW1ZJAJG4I7sKtKCcNP4Vx26fEwbB8q7OyyrkelAa/PQPycfdVDmX0Fj5ItD2W6C3ascQIYhJ5Yq8s7UIBrPMdZyb8O96ymH4mQ="
    skip_existing: true
    on:
      branch: master
      tags: false
