language: python

os:
  - linux

python:
  - "2.7"
  - "3.4"

branches:
  only:
    - master
    - development

notifications:
  email:
    - komuisan@gmail.com
    - abelcarreras83@gmail.com

install:
    - sudo apt-get install libblas-dev liblapack-dev
    - sudo apt-get install gfortran
    - cd python
    - pip install coverage
    - pip install python-coveralls
    - pip install -r requirements.txt
    - pip install -e .

script:
    - cd unittest
    - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
    - coveralls
    - cd ..

deploy:
    # pypi
    - provider: pypi
      distributions: sdist
      user: abelcarreras83
      password:
         secure: "V8KVILKJF4pI48mtDzSyHWwuD0+XT1tY0y/po3QE90RjpVtsUHOC7/HU/ZvXt/Es0iT96c4yHO+Gucs4GqyYRV9Gqab68++BMaKaEefpgobZstnD2XQKMSJ1b23CN0AXCGu2wki644HNufUCTEyKe8p7BRv1FcjZgkPsY2hHY5snAJKv92wuL1nFPCPnjPJs6WelcNhmq48ptNAO4rIe25+KA9CErT3U/1lNKmInZ5d5/GAZsJPabYgtJUy+ynohJAPeQRtZsaclfbn/VDMrijqo3IiUy68kGcAqcQ7oTM8XXsI+bZodBrMbLeUYzw2Sgce7kKpihGilPMfzK9EkBxOV60fex1KYgm9ody6DTrrwgtWv8F3F+pkpf2b6kUh+S8ivceB0vagcWnpJ4nd04gejrlbLWIJvnHFxaHbUCwKGrmFP+jCGOTUHZ/HlN+SzgStbu+HY6iQ6ilVal9Q3hZV6qHW2VTteP/ycGAlvgMcHm1T+ynyJ/nwe54GXx6HSdXlrelnqjVegT39CNOFQTVDe4VCAZMQOpumIPoDFJ2f4Syq1KY9J3IAd0d+CnyZLziy187BarW+RDLZ95eJIAfMvnw+tBjxWXoXMSDDYTEEt5D95FfoAv8FRN37ZYpeDZyzqNXtRqJDFZVumvQfB4qIlcAsIs87qLarIqz+caes="
      skip_existing: true
      on:
          branch: master
 #         branch: development
          tags: False