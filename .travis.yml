language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: "Hra1HN0aJfmDDKvSnrQUtO0XC9752U17Si2xX3bYnyNp9qOMoQcEjYtuJeBsmjK/fnONAoqn2nQRmy7rciYFaosL47UdoSzsLqg1SAmq3xyOt2RF6CzJVwLeHDhJjTvnk69fikvnCSmZMNczCECTsf7pOg2GUD6wTGRZir+jlE3VDL/Vwqk4VJ70v6J36DDP8QSvtBVLVNSNNH3nfNPKCWlzshImhKN6neTOFZFGah1YTRgsZE8vS4fQw6MK6TG9rNneE0OOYtKw+bul87T0rDHSepYZWKMAdkW9ezc+dCyr9sD/UFOThTzFjsQ2PX2qLKyP+JThzcUiAlTJ0lUZqPYYQmzTS6QcvTJCRioC3i8jdW3p8ybbfYhQS7oNgJMwrj/UNdN9cF66Iy/d4BewYamMemKfA2MTWje+oWFDWXOsDPvtyN+9S8GCFzfrMJ2wAb1Z+K8uNmAVzWMo/1SlXtzIMer9/KONCZDUZu29PGPnD/vNON8EOu6efPf3hMFcBL8VTmQWxdhMl2y5hfMNUi2IKqTIPVa59SS4cQO1jJtw1FPQ1oELLSExNUt9OZV+5N6JPWz+LGmlRdPAG/91yuHQ5OnvRL4lMc9W5FOuhwbnCFNagzapMezDo4mG9FYSA0dt9N4mKEH6O/adHu8Ybrhjm5UeyT/IjZyR412zz+s="
    skip_existing: true
    on:
      branch: master
      tags: false
