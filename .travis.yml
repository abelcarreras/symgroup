language: python

os:
  - linux

python:
  - "2.7"
  - "3.4"

branches:
  only:
    - master
    - development

notifications:
  email:
    - komuisan@gmail.com
    - abelcarreras83@gmail.com

install:
    - sudo apt-get install libblas-dev liblapack-dev
    - sudo apt-get install gfortran
    - cd python
    - pip install coverage
    - pip install python-coveralls
    - pip install -r requirements.txt
    - pip install -e .

script:
    - cd unittest
    - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
    - coveralls
    - cd ..

deploy:
    # pypi
    - provider: pypi
      distributions: sdist
      user: abelcarreras83
      password:
         secure: "pQ4Y88CijAPTiJijOqza3heJh2fLVAXwhe7Qw7PZ/BdCmV6ymlej87BBoLSgEdZeUqrHRXc9gnSo7uSL/DM+W5y0vu0EfSSWkIFgsHe+QVttWWqwg9Zr6QziIfb5ta6vRAbVp4hLEcjbG6arRL96ZH5e3koyL1W7B2sriZmR0JqIC+4z6XBWTTqi+enfO8cauVNBPy7Qy0YEpY4kkUcWAmFVu+2kqUlw9QRBcXpPbYtaBiV9nGdcoFei/1OOttTpfACFlyRazQdn2JDlhda9UNzn5m37kbr6g2v2vlypd2LvkSeuYyUmynwnGomWN1lqttcIM9js7NWI2vfjHj5JS4Ce1BLKLtDWn2Pd2weCh2Q4i7naCo7nOGn4w+S07mAFEGQRXQYD3rD9oPK0v0jyMzH06KGM5JopPOnQ4w8Lkvh83qzpvuxRMjcZ5GF7qNq7OkawTcEQDVU4lYtVHcgeDpZyev2VqUi3G6gOAfMyo04nYk+VPso2awndwRjxT70JB1sM9lZaoZSl/KGz+gNC9bGj6mf2YBaFNzyZlJsh6iqTF8CBsKTlvwg2kTDAFd2uOFB2U2G6WtKBM/umYKowpf/vWudsV6TB/nZOzHXvodL0A0Xqa8LYw6gIzM1RFAgGGiNRLlXG/dbICraUZcmejbhglE2kBmiBmERo7A81CRg="
      skip_existing: true
      on:
          branch: master
 #         branch: development
          tags: False