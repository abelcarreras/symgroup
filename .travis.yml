language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com
#  - komuisan@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: "WdSMtxOYy579kkj9sI0wEWM45JuLIegM7F2Tutv8m328aLeXEq3K6/VLgPIcOUxR7PZ0G8odJHJMNz90n4VSyfeUA4d6tPp5LGltyeX7hM7ZkOAoqB3KKuVDzYBcSLsGabOb9b0fm7eZ3PR3E4ZjlJuL7CCOKmd3g6SGF0syaFIE3dDSS34EjkpQasrZGPDEeVOa31t9znbOge6A4nfxRtKmd5oPhy0kEern+LsxcM4QnO0ZrXm7u7ToFEO0zlVNa8AXdcxqw6nClk1QPU5Wkc2alOrFdKe9zPZM435P/PrQzlA70+W7sXAkfz8Thgy36tYgV5FqaARZegj+hR4FgQ5RtqH5UKU44wcYq5X0g5Km3Amcr2r7Iv0E/luGzKNGInkG4RXzyYR6ervP14UpfZAii4H1WC5lwkRZ+mU/66/QLpLhmhfEFDYkXqM1lFDhM2DjDX0kLr4WryAXee2q0o8/AYMRVr0sS0hVThRBbOjhsxkbYxVITNxLAiWl2y/PstVSFN6oZ7oXevsTYgLVpBmwo74yiGlSHVkU1v+Yfzm2sh3RiGtSLqFPTFjLT/UxXYkdrxvAzV5CYkD688Gir9i96lCoT504naCyhlEM7FwlWx5es/r9QVtzkMjW3sypnQ5Zp8azWvIBTpFH2xtmcsaLMCnmoiN3Mxwb0Ls9i6U="
    skip_existing: true
    on:
      branch: master
      tags: false
