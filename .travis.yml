language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: "UrpdgpTYdpbOdZiv/JMWKjx4Nye2KqBnP8O80Joz9jeRoqP2SW2XKygGMNlzckxdbq1nVrCn3SUWxT6DHVH/wRmWxwTUSGaI1Lp7RrQSE419I1KiF/Sy8tNlwMjT9qPxsAx9TJzTHbhARDK56L0l15FWvMF+bO0/mIXCo8FfFuAKgeHbfL2CczyjaY3/dueEPZpbhtFGwCLLPr4opB0D3/U5Xw+oVtgmqudTOX2ureSR3VhFKYJx/i1Ai5FqpSyj3Jct+V4tTxcTlB9NwFGH1BCe/n1Wl7gknsc6io5N38XSKM1vl1dWcWdH9OWjC2aM8L+sJflLpEUjOf+qeU/bAIe/7sT55sZtkOa2Z38ZfwxpyL3ZKSwrRB8MlyM+OAw/GvoV7uKQc3cdnJq/WaqiptmXuK/96winxk/NYUwD7BHBfd8PMoGXDp33OCuOyC3g2XcTNTluywuqheMpsQ04bKaxl6Mzj6XnQpMYJr2aS/DwC7+MT+YgCiNhLn3Xm2GAQUi2D+YkPgfYaWz5DFvinJTb8YGwA2yt3hXM0MnlKyn+hWjwpJO0pUsuUtyezumexjoZ3sQOIms1k8J7gQ4Tt6rcEF+zNvkAAGjV27BmE28s7OM6fswdwAB0oAZUcp7H6YX7rxfqwGdA2EjYDECp8fQTmwz+h19FSVp43txMTRs="
    skip_existing: true
    on:
      branch: master
      tags: false
