language: python
os:
  - linux

python:
  - '2.7'
  - '3.4'

branches:
  only:
  - master
  - development

notifications:
  email:
  - abelcarreras83@gmail.com
#  - komuisan@gmail.com

install:
  - sudo apt-get install libblas-dev liblapack-dev
  - sudo apt-get install gfortran
  - cd python
  - pip install coverage
  - pip install python-coveralls
  - pip install -r requirements.txt
  - pip install -e .

script:
  - cd unittest
  - coverage run --source=../symgroupy -m unittest discover . "test_*.py"

after_success:
  - coveralls
  - cd ..

deploy:
  - provider: pypi
    distributions: sdist
    user: abelcarreras83
    password:
      secure: "J3k4wuEjGnSNNmSXuRNpPGdhW4K7RxG1hPzW9njeCH9a6S8hKX8Qj55dxx1ZilUxYZ0/S4vhKupnKvdgl0lgiR2X+wdFXzgPJE7eqV+yhEoXOv5Wqrm5V4Nq5lUVKOvtwBmCjDOIPVaKUD6MVQU/nTTK+o4/q8dscfuuuabzFxwGEEhNo+Jc/5iP4vVtkxzylAl5KqIFL4hwQafHDoB/KCYWZI8KnRm5TR6AZa6tsz4L5ESY1qypjpcZDmEW6b/XoZRgbHyQtH/gE1UPKZ+deLVDGaojrHSad3ZoNk4BenZU8nERv8R/rL9694n8U/KdBWqb8moEP32Udi8ba/8C5MsReUPw4e3Ltxnpe84xENw+71GWEDFjYNTi8BzvWoHV0qTx6kdo4sL0MOhcSun82IwGYIFezkKY8CInJZnvENgSveQ5y/NNHYwp3yIutU1Xtp89+EXW7WKm7IHCG/0KqDz7ziFYWon1xfxoNRQbJwxpr+H7gpjGF9GU4MFx8Rq0Wk+EEfrWv7TrNv5nJsQ1ghDSYN9XW7kJAz12tE1e7zRZWUO71PvTQdUuQudOOYWz+S87OJcWDASdB5ma4U6J//jErxBxtNCE3EBLp14Tf7HiEmW9ht0MuLDdaoW68Ohi1ZzGL11oWelB1Dx9OoaHsjUgt+N2oRhFpas+YCgpwPU="
    skip_existing: true
    on:
      branch: master
      tags: false
